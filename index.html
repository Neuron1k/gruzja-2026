<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Gruzja kwiecien 2026</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;display:flex;height:100vh;overflow:hidden;background:#fff}
.panel{width:400px;min-width:400px;height:100vh;display:flex;flex-direction:column;border-right:1px solid #dadce0;z-index:1000;background:#fff}
.panel-head{padding:14px 16px;border-bottom:1px solid #e0e0e0;flex-shrink:0}
.panel-head h1{font-size:15px;color:#202124;margin-bottom:3px}
.panel-head .sub{font-size:11px;color:#5f6368;line-height:1.4}
.info-chip{display:inline-block;padding:4px 10px;border-radius:12px;font-size:11px;margin-top:5px;margin-right:4px}
.chip-flight{background:#e8f0fe;color:#1967d2}
.chip-easter{background:#fce8e6;color:#c5221f}
.scroll{flex:1;overflow-y:auto}
.dc{padding:12px 14px;border-bottom:1px solid #f0f0f0;cursor:pointer;transition:background .12s}
.dc:hover{background:#f8f9fa}
.dc.on{background:#e8f0fe;border-left:3px solid #1a73e8}
.dc.easter-bg{background:#fef7f0}
.dc.easter-bg.on{background:#fce8e6;border-left-color:#ea4335}
.dh{display:flex;align-items:center;gap:7px}
.dn{background:#1a73e8;color:#fff;width:24px;height:24px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:11px;font-weight:700;flex-shrink:0}
.dc.easter-bg .dn{background:#ea4335}
.dd{font-weight:600;font-size:12px;color:#202124}
.dt{font-size:11px;color:#5f6368;margin-left:31px}
.dr{font-size:10px;color:#9aa0a6;margin-left:31px;margin-top:1px}
.det{display:none;padding:4px 14px 12px}
.det.show{display:block}
.ds{margin-top:6px;padding:7px 9px;background:#f8f9fa;border-radius:6px;font-size:11px;line-height:1.5}
.ds h4{font-size:10px;text-transform:uppercase;letter-spacing:.4px;margin-bottom:3px;font-weight:600}
.ds.prog h4{color:#1a73e8}
.ds.food h4{color:#ea4335}
.ds.tip h4{color:#34a853}
.ds.split-box{background:#fef7e0;border:1px solid #fce8b2}
.ds.split-box h4{color:#f9ab00}
.ds ul{margin:0;padding-left:14px}
.ds li{margin-bottom:1px;color:#3c4043}
.ds a{color:#1a73e8;text-decoration:none;font-size:10px}
.ds a:hover{text-decoration:underline}
.food-item{margin-bottom:4px}
.food-name{font-weight:600}
.food-stars{color:#f9ab00;font-size:10px}
.foot{padding:8px 14px;border-top:1px solid #e0e0e0;font-size:10px;color:#5f6368;flex-shrink:0;line-height:1.4}
.extra-toggle{padding:8px 14px;border-top:1px solid #e0e0e0;flex-shrink:0}
.extra-toggle button{width:100%;padding:8px;border:1px solid #dadce0;border-radius:8px;background:#fff;cursor:pointer;font-size:11px;color:#1a73e8;font-weight:500}
.extra-toggle button:hover{background:#e8f0fe}
.extra-list{display:none;border-top:1px solid #f0f0f0}
.extra-list.show{display:block}
.ex{padding:8px 14px;border-bottom:1px solid #f5f5f5;font-size:11px;cursor:pointer}
.ex:hover{background:#f8f9fa}
.ex .en{font-weight:600;color:#202124}
.ex .ec{color:#5f6368;font-size:10px}
.ex .er{color:#f9ab00;font-size:10px}
.ex a{color:#1a73e8;text-decoration:none;font-size:10px;margin-left:4px}
#map{flex:1;height:100vh}
.cm{border-radius:50%;border:2.5px solid #fff;box-shadow:0 1px 4px rgba(0,0,0,.4);cursor:pointer;transition:transform .12s}
.cm:hover{transform:scale(1.3)}
.leaflet-popup-content{font-family:inherit;font-size:12px;line-height:1.5;margin:10px 14px}
.leaflet-popup-content b{display:block;margin-bottom:2px}
.pop-badge{font-size:9px;text-transform:uppercase;letter-spacing:.3px;padding:2px 6px;border-radius:8px;display:inline-block;margin-bottom:4px;font-weight:600}
.pop-r{color:#f9ab00;font-size:11px;margin-top:2px}
.pop-link{display:inline-block;margin-top:4px;color:#1a73e8;text-decoration:none;font-size:11px}
.leg{display:flex;flex-wrap:wrap;gap:8px;padding:6px 14px;font-size:10px;border-top:1px solid #f0f0f0;flex-shrink:0}
.leg-i{display:flex;align-items:center;gap:3px}
.leg-d{width:8px;height:8px;border-radius:50%;border:1.5px solid #fff;box-shadow:0 0 0 1px #bbb}
.sep{list-style:none;border-top:1px dashed #dadce0;margin:3px 0;padding:0}
.budget-inner h4{font-size:10px;text-transform:uppercase;letter-spacing:.4px;margin:10px 0 6px;font-weight:600;color:#1a73e8}
.budget-inner h4:first-child{margin-top:0}
.budget-inner table{width:100%;border-collapse:collapse;margin-bottom:6px}
.budget-inner th{text-align:left;padding:4px 6px;background:#f8f9fa;font-size:10px;color:#5f6368;border:1px solid #e8eaed}
.budget-inner td{padding:4px 6px;border:1px solid #e8eaed;font-size:11px;vertical-align:top}
.budget-inner .best{color:#137333;font-weight:600}
.budget-inner .note{background:#fef7e0;border-left:3px solid #fbbc04;padding:6px 8px;border-radius:0 4px 4px 0;margin:6px 0;font-size:10px;color:#3c4043}
.budget-inner .brow{display:flex;justify-content:space-between;padding:3px 0;border-bottom:1px solid #f5f5f5}
.budget-inner .brow:last-child{border-bottom:none}
.budget-inner .brow.total{border-top:2px solid #dadce0;margin-top:4px;padding-top:6px;font-weight:600;font-size:12px}
.budget-inner .pack-cat{font-size:10px;text-transform:uppercase;letter-spacing:.4px;font-weight:600;color:#1a73e8;margin:10px 0 4px}
.budget-inner .pack-cat:first-child{margin-top:0}
.budget-inner .pack-item{padding:2px 0;color:#3c4043;display:flex;align-items:flex-start;gap:4px}
.budget-inner .pack-item::before{content:"‚òê";color:#9aa0a6;flex-shrink:0;font-size:12px}
.budget-inner .pack-item.important{font-weight:600}
.budget-inner .pack-item.important::before{content:"‚òê";color:#ea4335}

.main-tabs{display:flex;border-bottom:2px solid #dadce0;flex-shrink:0;background:#fff}
.main-tabs button{flex:1;padding:12px 6px;border:none;border-bottom:3px solid transparent;background:#fff;cursor:pointer;font-size:12px;font-weight:600;color:#5f6368;transition:all .2s;letter-spacing:.2px}
.main-tabs button.on{color:#1a73e8;border-bottom-color:#1a73e8;background:#f8fbff}
.main-tabs button:hover:not(.on){background:#f1f3f4}
.tab-pane{display:none;flex:1;overflow-y:auto;min-height:0}
.tab-pane.active{display:flex;flex-direction:column;flex:1;min-height:0}
.tab-pane .scroll{flex:1;overflow-y:auto}
.tab-pane .budget-inner{flex:1;overflow-y:auto;padding:12px 14px;font-size:11px;line-height:1.6}
.mobile-nav{display:none;position:fixed;top:0;left:0;right:0;z-index:2000;background:#fff;border-bottom:2px solid #dadce0;height:46px;align-items:stretch}
.mobile-nav button{flex:1;border:none;border-bottom:3px solid transparent;background:#fff;cursor:pointer;font-size:13px;font-weight:600;color:#5f6368;letter-spacing:.3px;transition:all .2s}
.mobile-nav button.active{color:#1a73e8;border-bottom-color:#1a73e8}
@media(max-width:768px){
  .mobile-nav{display:flex}
  body{flex-direction:column;overflow:hidden;height:100vh}
  .panel{width:100%!important;min-width:0!important;height:calc(100vh - 46px);margin-top:46px;border-right:none}
  #map{height:calc(100vh - 46px);margin-top:46px;width:100%}
  body.m-map .panel{display:none}
  body.m-list #map{display:none}
}
.main-tabs{overflow-x:auto;-webkit-overflow-scrolling:touch;scrollbar-width:none}
.main-tabs::-webkit-scrollbar{display:none}
.main-tabs button{white-space:nowrap;min-width:0;flex-shrink:0}
.acc-section{margin-bottom:16px}
.acc-section h4{font-size:10px;text-transform:uppercase;letter-spacing:.4px;font-weight:600;color:#e91e63;margin:10px 0 6px}
.acc-section h4:first-child{margin-top:0}
.acc-card{padding:8px 10px;background:#fff;border:1px solid #e8eaed;border-radius:8px;margin-bottom:8px}
.acc-card.recommended{border-color:#e91e63;border-width:2px}
.acc-card.booked{border-color:#34a853;border-width:2px}
.acc-badge{display:inline-block;padding:2px 6px;border-radius:8px;font-size:9px;font-weight:600;text-transform:uppercase;letter-spacing:.3px;margin-bottom:4px;margin-right:4px}
.acc-badge.rec{background:#fce4ec;color:#c2185b}
.acc-badge.book{background:#e8f5e9;color:#2e7d32}
.acc-name{font-weight:600;font-size:12px;color:#202124}
.acc-detail{font-size:10px;color:#5f6368;margin-top:2px}
.acc-price{font-size:11px;font-weight:600;color:#e91e63;margin-top:3px}
.acc-links{margin-top:4px}
.acc-links a{color:#1a73e8;text-decoration:none;font-size:10px;margin-right:8px}
.acc-links a:hover{text-decoration:underline}
.survey-btn{display:block;width:100%;padding:12px;margin-bottom:16px;background:#1a73e8;color:#fff;border:none;border-radius:8px;font-size:13px;font-weight:600;cursor:pointer;text-decoration:none;text-align:center}
.survey-btn:hover{background:#1557b0}
.survey-q{margin-bottom:14px}
.survey-q h4{font-size:11px;color:#202124;font-weight:600;margin-bottom:6px}
.survey-bar-wrap{display:flex;align-items:center;margin-bottom:3px}
.survey-bar-label{width:45%;font-size:10px;color:#3c4043;text-align:right;padding-right:8px}
.survey-bar-track{flex:1;height:16px;background:#f1f3f4;border-radius:8px;overflow:hidden;position:relative}
.survey-bar-fill{height:100%;border-radius:8px;transition:width .3s}
.survey-bar-pct{position:absolute;right:4px;top:0;line-height:16px;font-size:9px;font-weight:600;color:#fff}
.survey-bar-count{font-size:9px;color:#9aa0a6;margin-left:4px;min-width:20px}
.survey-respondents{padding:8px 10px;background:#f8f9fa;border-radius:6px;margin-bottom:12px;font-size:10px;color:#5f6368}
.survey-respondents strong{color:#202124}
.survey-comment{padding:6px 10px;background:#fef7e0;border-left:3px solid #fbbc04;border-radius:0 4px 4px 0;margin-bottom:6px;font-size:10px;color:#3c4043;font-style:italic}
.survey-loading{text-align:center;padding:40px;color:#9aa0a6;font-size:12px}
.survey-error{text-align:center;padding:20px;color:#ea4335;font-size:11px}
.leg-i{cursor:pointer;user-select:none;transition:opacity .2s}
.leg-i.off{opacity:.35;text-decoration:line-through}
.leg-i.off .leg-d{opacity:.3}
.map-filter-btn{display:none;position:fixed;bottom:20px;right:16px;z-index:1500;width:44px;height:44px;border-radius:50%;background:#fff;border:2px solid #dadce0;box-shadow:0 2px 8px rgba(0,0,0,.25);cursor:pointer;font-size:20px;align-items:center;justify-content:center;transition:all .2s}
.map-filter-btn:hover{background:#f1f3f4;transform:scale(1.05)}
.map-filter-overlay{display:none;position:fixed;bottom:74px;right:16px;z-index:1500;background:#fff;border-radius:12px;box-shadow:0 4px 16px rgba(0,0,0,.25);padding:12px 14px;max-width:220px}
.map-filter-overlay.show{display:block}
.map-filter-overlay .leg-i{display:flex;align-items:center;gap:5px;padding:6px 0;font-size:12px}
@media(max-width:768px){
  body.m-map .map-filter-btn{display:flex}
}
.cm-dim{opacity:.25!important;transform:scale(0.8)!important}
@keyframes marker-pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.35)}}
.cm-highlight{animation:marker-pulse 1.5s ease-in-out infinite;box-shadow:0 0 8px 3px rgba(26,115,232,.5)!important}
</style>
</head>
<body>
<div class="mobile-nav"><button id="btn-list" class="active" onclick="mobileView('list')">üìã Lista</button><button id="btn-map" onclick="mobileView('map')">üó∫Ô∏è Mapa</button></div>
<div class="panel">
<div class="panel-head">
<h1>Gruzja &mdash; Plan Wycieczki</h1>
<div class="sub">9 osob (7 doroslych + 2 dzieci) &middot; Kutaisi &middot; 2-9 kwietnia 2026</div>
<span class="info-chip chip-flight">&#9992; Przylot 2.04 11:30 &middot; Wylot 9.04 12:30</span>
<span class="info-chip chip-easter">&#129370; Wielkanoc: ndz 5.04</span>
</div>
<div class="main-tabs">
<button class="on" onclick="mainTab('plan',this)">üìÖ Plan</button>
<button onclick="mainTab('noclegi',this)">üè® Noclegi</button>
<button onclick="mainTab('budget',this)">üí∂ Bud≈ºet</button>
<button onclick="mainTab('packing',this)">üéí Pakowanie</button>
<button onclick="mainTab('ankieta',this)">üìã Ankieta</button>
</div>
<div class="tab-pane active" id="pane-plan">
<div class="scroll" id="daysList"></div>
<div class="extra-toggle"><button onclick="toggleExtras()">&#128205; Dodatkowe atrakcje do przejrzenia...</button></div>
<div class="extra-list" id="extraList"></div>
<div class="leg">
<div class="leg-i" onclick="toggleCat('#1a73e8',this)"><div class="leg-d" style="background:#1a73e8"></div>Miasto</div>
<div class="leg-i" onclick="toggleCat('#ea4335',this)"><div class="leg-d" style="background:#ea4335"></div>Atrakcja</div>
<div class="leg-i" onclick="toggleCat('#9c27b0',this)"><div class="leg-d" style="background:#9c27b0"></div>Winnica</div>
<div class="leg-i" onclick="toggleCat('#34a853',this)"><div class="leg-d" style="background:#34a853"></div>Dzieci</div>
<div class="leg-i" onclick="toggleCat('#f9ab00',this)"><div class="leg-d" style="background:#f9ab00"></div>Kazbegi</div>
<div class="leg-i" onclick="toggleCat('#ff7043',this)"><div class="leg-d" style="background:#ff7043"></div>Bonus</div>
<div class="leg-i" onclick="toggleCat('#e91e63',this)"><div class="leg-d" style="background:#e91e63"></div>Noclegi</div>
</div>
</div>
<div class="tab-pane" id="pane-budget">
<div class="budget-inner" id="budgetPanel"></div>
</div>
<div class="tab-pane" id="pane-packing">
<div class="budget-inner" id="packingPanel"></div>
</div>
<div class="tab-pane" id="pane-noclegi">
<div class="budget-inner" id="noclegiPanel"></div>
</div>
<div class="tab-pane" id="pane-ankieta">
<div class="budget-inner" id="ankietaPanel"></div>
</div>
</div>
<div id="map"></div>
<button class="map-filter-btn" onclick="toggleMapFilters()" title="Filtry">üîç</button>
<div class="map-filter-overlay" id="mapFilterOverlay"></div>

<script>
var ATTR = [{"id": "kut_air", "lat": 42.1767, "lng": 42.4827, "name": "Kutaisi Airport (KUT)", "cat": "Lotnisko", "color": "#5f6368", "sz": 14, "rating": null, "reviews": null, "gmap": "https://www.google.com/maps/search/Kutaisi+Airport", "desc": "Przylot: 2.04 o 11:30 | Wylot: 9.04 o 12:30<br>Odbior/zwrot auta na lotnisku", "days": [1, 8], "inPlan": true}, {"id": "kutaisi", "lat": 42.2679, "lng": 42.6946, "name": "Kutaisi", "cat": "Miasto", "color": "#1a73e8", "sz": 18, "rating": null, "reviews": null, "gmap": "https://www.google.com/maps/search/Kutaisi+Georgia", "desc": "Noclegi: dzien 1-2, 7<br>Bagrati, Bialy Most, Kolchis Fountain", "days": [1, 2, 7], "inPlan": true}, {"id": "tbilisi", "lat": 41.7151, "lng": 44.8271, "name": "Tbilisi", "cat": "Miasto", "color": "#1a73e8", "sz": 18, "rating": null, "reviews": null, "gmap": "https://www.google.com/maps/search/Tbilisi+Old+Town", "desc": "Noclegi: dzien 3-4, 6<br>Stare Miasto, Abanotubani, Narikala, Most Pokoju", "days": [3, 4, 5, 6], "inPlan": true}, {"id": "sighnaghi", "lat": 41.6167, "lng": 45.9228, "name": "Sighnaghi", "cat": "Miasto", "color": "#1a73e8", "sz": 18, "rating": 4.7, "reviews": "3k", "gmap": "https://www.google.com/maps/search/Sighnaghi+Georgia", "desc": "Opcja w dniu 5: Miasto Milosci<br>Mury, widoki na doline Alazani", "days": [5], "inPlan": true}, {"id": "prometheus", "lat": 42.3764, "lng": 42.6008, "name": "Jaskinia Prometeusza", "cat": "Atrakcja", "color": "#ea4335", "sz": 15, "rating": 4.6, "reviews": "5k+", "gmap": "https://www.google.com/maps/search/Prometheus+Cave+Kutaisi", "desc": "MUST-DO! Kolorowe oswietlenie + muzyka klasyczna<br>23 GEL/os, ~45 min. Opcja rejs lodka +17 GEL<br>Przyjechac rano - tlumy w sezonie!", "days": [2], "inPlan": true}, {"id": "martvili", "lat": 42.4581, "lng": 42.3789, "name": "Kanion Martvili", "cat": "Atrakcja", "color": "#ea4335", "sz": 15, "rating": 4.5, "reviews": "6k+", "gmap": "https://www.google.com/maps/search/Martvili+Canyon+Georgia", "desc": "Turkusowa woda, rejs lodka (~15-20 min), piekne klify<br>20 GEL + lodka 20 GEL<br>UWAGA: dzieci <1m wzrostu NIE moga na lodke!<br>Spacer (800m) i tak wart zachodu", "days": [2], "inPlan": true}, {"id": "okatse", "lat": 42.3903, "lng": 42.5044, "name": "Kanion Okatse", "cat": "Atrakcja", "color": "#ff7043", "sz": 12, "rating": 4.7, "reviews": "5.4k", "gmap": "https://www.google.com/maps/search/Okatse+Canyon+Georgia", "desc": "Most wiszacy nad kanionem, spektakularne widoki<br>ALE: 1h marszu w jedna strone - za trudny z dziecmi 3+5<br>Fantastyczny dla doroslych, skip z maluchami", "days": [], "inPlan": false}, {"id": "gelati", "lat": 42.2961, "lng": 42.7681, "name": "Gelati Monastery", "cat": "UNESCO", "color": "#ea4335", "sz": 15, "rating": 4.8, "reviews": "7.5k", "gmap": "https://www.google.com/maps/search/Gelati+Monastery+Kutaisi", "desc": "XII-wieczny klasztor, przepiekne mozaiki<br>UNESCO - wejscie wolne", "days": [7], "inPlan": true}, {"id": "mtskheta_jvari", "lat": 41.8385, "lng": 44.7332, "name": "Jvari Monastery", "cat": "UNESCO", "color": "#ea4335", "sz": 14, "rating": 4.8, "reviews": "11k", "gmap": "https://www.google.com/maps/search/Jvari+Monastery+Mtskheta", "desc": "VI-wieczny klasztor na wzgorzu<br>UNESCO - widok na Mtskhete i zbieg rzek", "days": [5, 6], "inPlan": true}, {"id": "svetitskhoveli", "lat": 41.8422, "lng": 44.7209, "name": "Svetitskhoveli", "cat": "UNESCO", "color": "#ea4335", "sz": 14, "rating": 4.8, "reviews": "14.7k", "gmap": "https://www.google.com/maps/search/Svetitskhoveli+Cathedral+Mtskheta", "desc": "Katedra patriarchalna, XI w.<br>UNESCO - jedno z najswietszych miejsc w Gruzji", "days": [5, 6], "inPlan": true}, {"id": "narikala", "lat": 41.688, "lng": 44.8088, "name": "Narikala", "cat": "Atrakcja", "color": "#ea4335", "sz": 14, "rating": 4.7, "reviews": "9.2k", "gmap": "https://www.google.com/maps/search/Narikala+Fortress+Tbilisi", "desc": "IV-wieczna twierdza nad Tbilisi<br>Panorama na cale miasto<br>Kolejka linowa z Rike Park", "days": [3], "inPlan": true}, {"id": "baths", "lat": 41.6894, "lng": 44.8094, "name": "Laznie siarkowe", "cat": "Atrakcja", "color": "#ea4335", "sz": 13, "rating": 4.5, "reviews": "11.1k", "gmap": "https://www.google.com/maps/search/Abanotubani+sulfur+baths+Tbilisi", "desc": "Historyczne laznie siarkowe, Abanotubani<br>Prywatna sala: ~70 GEL/h (~26$)<br>Must do!", "days": [3], "inPlan": true}, {"id": "mtatsminda", "lat": 41.6935, "lng": 44.7806, "name": "Mtatsminda Park", "cat": "Dzieci", "color": "#34a853", "sz": 16, "rating": 4.6, "reviews": "25.5k", "gmap": "https://www.google.com/maps/search/Mtatsminda+Park+Tbilisi", "desc": "Karuzele, diabelski mlyn, widoki na Tbilisi<br>Funicular ~5 GEL<br>RAJ DLA DZIECI!", "days": [4], "inPlan": true}, {"id": "drybridge", "lat": 41.701, "lng": 44.8031, "name": "Dry Bridge Market", "cat": "Targ", "color": "#ea4335", "sz": 12, "rating": 4.5, "reviews": "9.7k", "gmap": "https://www.google.com/maps/search/Dry+Bridge+Market+Tbilisi", "desc": "Targ antykow i rekodziel (weekend!)<br>Pamiatki, obrazy, bizuteria", "days": [4], "inPlan": true}, {"id": "pheasant", "lat": 41.6161, "lng": 45.9203, "name": "Pheasants Tears", "cat": "Winnica", "color": "#9c27b0", "sz": 12, "rating": 4.2, "reviews": "654", "gmap": "https://www.google.com/maps/search/Pheasants+Tears+Sighnaghi", "desc": "Kultowa winnica, swietne wino qvevri<br>Ale: wolna obsluga, male porcje, ryzykowne z dziecmi<br>Lepszy wybor: Okro's Wines", "days": [], "inPlan": false}, {"id": "okros", "lat": 41.614, "lng": 45.926, "name": "Okro's Wines", "cat": "Winnica", "color": "#9c27b0", "sz": 15, "rating": 4.5, "reviews": "636", "gmap": "https://www.google.com/maps/search/Okros+Wines+Sighnaghi", "desc": "Fantastyczny taras z widokiem na Alazani!<br>Degustacja + jedzenie w jednym, wlasciciel mowi po angielsku<br>Lepszy wybor niz Pheasants Tears dla rodzin<br>Codziennie 11-20, tel: +995 551 622 228", "days": [5, 6], "inPlan": true}, {"id": "khareba", "lat": 41.9547, "lng": 45.8147, "name": "Khareba Winery", "cat": "Winnica", "color": "#9c27b0", "sz": 15, "rating": 4.4, "reviews": "3.5k", "gmap": "https://www.google.com/maps/search/Khareba+Winery+Kvareli", "desc": "Tunel wina 7.7 km w skale!<br>PLAC ZABAW + LODZIARNIA<br>Ale: tourist trap, masowa degustacja, 2h od Tbilisi", "days": [], "inPlan": false}, {"id": "kindzmarauli", "lat": 41.9528, "lng": 45.8239, "name": "Kindzmarauli Corp.", "cat": "Winnica", "color": "#9c27b0", "sz": 12, "rating": 4.6, "reviews": "291", "gmap": "https://www.google.com/maps/search/Kindzmarauli+Corporation+Kvareli", "desc": "Od 1533! Degustacja 5 win: 8 GEL/os<br>Kawiarnia z lodami", "days": [], "inPlan": false}, {"id": "kazbegi", "lat": 42.6592, "lng": 44.6386, "name": "Kazbegi (Stepantsminda)", "cat": "Gory", "color": "#f9ab00", "sz": 18, "rating": 4.8, "reviews": "5k", "gmap": "https://www.google.com/maps/search/Kazbegi+Stepantsminda", "desc": "Widoki na Mt Kazbek (5047m) + Gergeti Trinity<br>3-3.5h od Tbilisi<br>Droga gorska - sprawdz warunki!", "days": [5], "inPlan": true}, {"id": "ananuri", "lat": 42.1636, "lng": 44.7025, "name": "Ananuri", "cat": "Atrakcja", "color": "#f9ab00", "sz": 14, "rating": 4.6, "reviews": "14.9k", "gmap": "https://www.google.com/maps/search/Ananuri+Fortress+Georgia", "desc": "Twierdza nad jeziorem Zhinvali<br>1.5h od Tbilisi, po drodze na Kazbegi", "days": [5], "inPlan": true}, {"id": "gudauri", "lat": 42.4569, "lng": 44.4728, "name": "Gudauri", "cat": "Atrakcja", "color": "#f9ab00", "sz": 13, "rating": 4.5, "reviews": "2k", "gmap": "https://www.google.com/maps/search/Gudauri+viewpoint+Georgia", "desc": "Punkt widokowy, Pomnik Przyjazni Narodow<br>Panorama Kaukazu<br>2h od Tbilisi", "days": [5], "inPlan": true}, {"id": "botanical", "lat": 41.6876, "lng": 44.8134, "name": "Ogrod Botaniczny", "cat": "Atrakcja", "color": "#ff7043", "sz": 12, "rating": 4.6, "reviews": "12.4k", "gmap": "https://www.google.com/maps/search/Tbilisi+Botanical+Garden", "desc": "Za Narikala, ladne spacery<br>Wodospad w srodku!<br>~5 GEL", "days": [], "inPlan": false}, {"id": "chronicle", "lat": 41.7558, "lng": 44.6969, "name": "Kronika Gruzji", "cat": "Atrakcja", "color": "#ea4335", "sz": 14, "rating": 4.8, "reviews": "12.4k", "gmap": "https://www.google.com/maps/search/Chronicle+of+Georgia+Tbilisi", "desc": "Monumentalne kolumny nad Tbilisi Sea<br>Gruzinski Stonehenge!<br>Bezplatnie, dojazd taxi ~15 min z centrum", "days": [4], "inPlan": true}, {"id": "sataplia", "lat": 42.3156, "lng": 42.6733, "name": "Sataplia (dinozaury!)", "cat": "Dzieci", "color": "#34a853", "sz": 15, "rating": 4.5, "reviews": "1.1k", "gmap": "https://www.google.com/maps/search/Sataplia+Nature+Reserve+Kutaisi", "desc": "Slady dinozaurow! + jaskinia + szklany taras widokowy<br>10 min od Kutaisi, 1-2h<br>20 GEL/dorosly, dzieci <6 free<br>Bluza - 14¬∞C w jaskini", "days": [2], "inPlan": true}, {"id": "uplistsikhe", "lat": 41.9668, "lng": 44.2073, "name": "Uplistsikhe", "cat": "Atrakcja", "color": "#ff7043", "sz": 13, "rating": 4.7, "reviews": "11.4k", "gmap": "https://www.google.com/maps/search/Uplistsikhe+cave+town+Georgia", "desc": "Miasto skalne z epoki zelaza!<br>3000 lat historii<br>1h od Tbilisi", "days": [], "inPlan": false}, {"id": "borjomi", "lat": 41.8367, "lng": 43.3903, "name": "Borjomi Park", "cat": "Dzieci", "color": "#34a853", "sz": 12, "rating": 4.6, "reviews": "15.1k", "gmap": "https://www.google.com/maps/search/Borjomi+Central+Park", "desc": "Park + wody mineralne ze zrodla<br>Kolejka linowa, baseny<br>Po drodze Kutaisi-Tbilisi (objazd)", "days": [], "inPlan": false}, {"id": "turtle", "lat": 41.71, "lng": 44.76, "name": "Turtle Lake", "cat": "Dzieci", "color": "#34a853", "sz": 11, "rating": 4.4, "reviews": "1.6k", "gmap": "https://www.google.com/maps/search/Turtle+Lake+Tbilisi", "desc": "Jeziorko nad Tbilisi, kolejka<br>Trampoliny, plac zabaw<br>Dobre na polowe dnia", "days": [], "inPlan": false}, {"id": "rike", "lat": 41.692, "lng": 44.806, "name": "Rike Park", "cat": "Dzieci", "color": "#34a853", "sz": 11, "rating": 4.7, "reviews": "15k", "gmap": "https://www.google.com/maps/search/Rike+Park+Tbilisi", "desc": "Park nad rzeka Kura<br>Kolejka linowa do Narikala stad!<br>Fontanny, plac zabaw", "days": [3], "inPlan": false}, {"id": "bagrati", "lat": 42.2764, "lng": 42.6964, "name": "Katedra Bagrati", "cat": "UNESCO", "color": "#ff7043", "sz": 12, "rating": 4.7, "reviews": "5.4k", "gmap": "https://www.google.com/maps/search/Bagrati+Cathedral+Kutaisi", "desc": "XI-wieczna katedra na wzgorzu<br>Widok na cale Kutaisi<br>UNESCO", "days": [1], "inPlan": false}];
var DAYS_A = [{"num": 1, "date": "Czw 2.04", "title": "Przylot - Kutaisi", "drive": "~30 min", "easter": false, "points": ["kut_air", "kutaisi", "bagrati"], "program": ["Lot KTW-KUT, ladowanie 11:30", "Odbior auta ~12:30", "Obiad w Kutaisi", "Katedra Bagrati + Bialy Most + Kolchis Fountain", "Spacer nad rzeka Rioni"], "food": [["Palaty", "4.5 (800)", "Obiad: polecana przez lokalsow, otwarta na lunch", "https://www.google.com/maps/search/Palaty+Kutaisi"], ["Sisters", "4.3 (1.4k)", "Kolacja: muzyka na zywo (otwieraja o 18:00!)", "https://www.google.com/maps/search/Sisters+restaurant+Kutaisi"], ["El Depo", "4.5 (1.5k)", "Alternatywa: najlepsze khinkali", "https://www.google.com/maps/search/El+Depo+Kutaisi"]], "tips": ["Spokojny start - dzieci zmeczone po locie", "Nie planuj za duzo na dzien 1", "Sisters otwiera o 18:00 - nie na obiad!"]}, {"num": 2, "date": "Pt 3.04", "title": "Jaskinie i kaniony", "drive": "~3h lacznie", "easter": false, "points": ["prometheus", "sataplia", "martvili", "kutaisi"], "program": ["Jaskinia Prometeusza (rano! 40 min jazdy, ~45 min)", "Sataplia (po drodze, 10 min od Kutaisi, 1-2h) - dinozaury!", "Kanion Martvili (po poludniu) - rejs lodka!"], "food": [["Baraqa", "4.4 (1k)", "Ogromne menu, rodzinne", "https://www.google.com/maps/search/Baraqa+Kutaisi"], ["Palaty", "4.5 (800)", "Polecana przez lokalsow", "https://www.google.com/maps/search/Palaty+Kutaisi"]], "tips": ["Prometeusz: 23 GEL/os, opcja rejsu lodka +17 GEL. Rano = mniej tlumow!", "Sataplia: dinozaury = hit dla 3- i 5-latka! 20 GEL/dorosly, dzieci <6 free. Bluza (14¬∞C)", "Martvili: 20 GEL + lodka 20 GEL. UWAGA: dzieci <1m wzrostu NIE moga na lodke!", "Okatse: SKIP z dziecmi - 1h marszu, za trudny z maluchami", "Martvili parking: 'lokalni' mowia ze zamkniete - to scam, jedz do kasy!"]}, {"num": 3, "date": "Sob 4.04", "title": "Przejazd do Tbilisi", "drive": "~3h", "easter": false, "points": ["kutaisi", "tbilisi", "narikala", "baths", "rike"], "program": ["Przejazd Kutaisi - Tbilisi (3h)", "Stare Miasto: Abanotubani, Most Pokoju", "Narikala - kolejka linowa z Rike Park!", "Wieczor: laznie siarkowe (prywatna sala!)"], "food": [["Keto & Kote", "4.4 (2.7k)", "World's 50 Best Discovery. REZERWACJA!", "https://www.google.com/maps/search/Keto+Kote+restaurant+Tbilisi"], ["Shavi Lomi", "4.5 (2k)", "Nowoczesna gruzinska, ogrod z kotami. Rezerwuj!", "https://www.google.com/maps/search/Shavi+Lomi+Tbilisi"]], "tips": ["Narikala: kolejka z Rike Park 2.5 GEL/os, 2 min. Dzieci kochaja!", "Laznie: Royal Bath House polecane. Sala ~70 GEL/h (4-6 os, potrzeba 2 sal!)", "UWAGA: goraca siarka za intensywna dla dzieci 3+5 - dorosli wieczorem, opieka na zmiane", "Rike Park: fontanny, plac zabaw + kolejka do Narikala", "Keto & Kote: ukryta uliczka, uprzedz o 9-os grupie!"]}, {"num": 4, "date": "Ndz 5.04", "title": "WIELKANOC w Tbilisi", "drive": "0h (pieszy!)", "easter": true, "points": ["tbilisi", "mtatsminda", "drybridge", "botanical", "chronicle", "turtle"], "program": ["Sniadanie wielkanocne!", "Kosciol: Sameba lub Sioni", "Mtatsminda Park - funicular + karuzele + widoki", "Dry Bridge Market - antyki, rekodziel, pamiatki", "Opcja: Zoo / Contact Zoo Faunaland", "Kolacja: supra (tradycyjna uczta UNESCO!)"], "food": [["Barbarestan", "4.6 (2.7k)", "MUST-HAVE! Kuchnia z XIX-w. ksiazki kucharskiej. REZERWUJ JUZ!", "https://www.google.com/maps/search/Barbarestan+restaurant+Tbilisi"], ["Ethnographer", "4.5 (1k)", "Supra z muzyka i tancem na zywo!", "https://www.google.com/maps/search/Ethnographer+restaurant+Tbilisi"], ["Mapshalia", "4.5 (800)", "Autentyczna, nie-turystyczna", "https://www.google.com/maps/search/Mapshalia+Tbilisi"]], "tips": ["WIELKANOC KATOLICKA! Zaplanuj cos specjalnego", "Mtatsminda: funicular 15 GEL (obie strony), wstep free, atrakcje $2-5. Zaplanuj 2-3h!", "Dry Bridge Market: najlepszy w weekendy - ndz wielkanocna = ideal! 30-60 min", "Sameba: najwieksza katedra, darmowa. Wielkanoc prawoslawna - piekne ale tlumy", "Gruzini tez maluja czerwone jajka! Jejili = trawka wielkanocna z pszenica", "Opcja: Kronika Gruzji (4.8, darmowe, wow-efekt, ~15 min taxi)"]}, {"num": 5, "date": "Pon 6.04", "title": "Dzien opcji (split!)", "drive": "0\u20137h", "easter": false, "points": ["tbilisi", "ananuri", "gudauri", "kazbegi", "sighnaghi", "okros", "mtatsminda"], "program": ["SPLIT: kazdy wybiera co chce!", "---", "\ud83c\udfd4\ufe0f Opcja KAZBEGI (caly dzien, ~7h jazdy):", "   Ananuri (twierdza nad jeziorem, 1.5h od Tbilisi)", "   Gudauri (panorama Kaukazu)", "   Stepantsminda (widoki na Kazbek 5047m!)", "   Obiad: Rooms Hotel Kazbegi", "---", "\ud83c\udf77 Opcja SIGHNAGHI (pol dnia, ~2.5h jazdy):", "   Miasto Milosci - spacer po murach", "   Widok na doline Alazani", "   Okro's Wines - degustacja + taras!", "---", "\ud83d\udc76 Opcja TBILISI (bez jazdy):", "   Mtatsminda Park (jesli nie byli w dzien 4)", "   Zoo / Contact Zoo / Ogrod Botaniczny", "   Kawiarnie, spacer, relax"], "food": [["Rooms Hotel Kazbegi", "4.7 (2k)", "Obiad z widokiem na gory! (opcja Kazbegi)", "https://www.google.com/maps/search/Rooms+Hotel+Kazbegi"], ["Okro's Wines", "4.5 (636)", "Taras z widokiem! (opcja Sighnaghi)", "https://www.google.com/maps/search/Okros+Wines+Sighnaghi"], ["Mapshalia", "4.5 (800)", "Autentyczna gruzinska (opcja Tbilisi)", "https://www.google.com/maps/search/Mapshalia+Tbilisi"]], "tips": ["SPLIT: czesc na Kazbegi, czesc w Sighnaghi, reszta z dziecmi w Tbilisi!", "Kazbegi: 3.5h w jedna strone. Droga gorska - sprawdz warunki w kwietniu!", "Gruzinska Droga Wojenna = spektakularna ale meczy dzieci", "Sighnaghi: perelka! Okro's lepszy niz Pheasants Tears dla rodzin", "Bez trekkingu do Gergeti Trinity (za stromo z dziecmi)", "Wieczorem: spotkanie w Tbilisi, wszyscy razem na kolacji"], "split": true}, {"num": 6, "date": "Wt 7.04", "title": "Cooking class + Mtskheta", "drive": "~1h", "easter": false, "points": ["tbilisi", "svetitskhoveli", "mtskheta_jvari"], "program": ["Cooking class w Tbilisi: khinkali + khachapuri!", "Obiad: to co ugotowaliscie!", "Mtskheta (20 min od Tbilisi):", "   Svetitskhoveli + Jvari Monastery (UNESCO!)", "Powrot do Tbilisi wieczorem"], "food": [["Cooking class", "", "Najlepszy posilek dnia! Eat This! Tours", ""], ["Sasadilo at Zeche", "4.5 (1.5k)", "Kolacja: fuzja w dawnej fabryce tytoniu", "https://www.google.com/maps/search/Sasadilo+at+Zeche+Tbilisi"]], "tips": ["Cooking class: MUST-DO! Eat This! Tours (4.8+), 20-50 EUR/os. Rezerwuj wczesniej!", "Dzieci kochaja lepienie khinkali!", "Svetitskhoveli + Jvari: UNESCO, darmowe, 30-45 min. Jvari = widoki na zbieg rzek!", "Lekki dzien po intensywnym dniu 5"]}, {"num": 7, "date": "Sr 8.04", "title": "Tbilisi - Kutaisi", "drive": "~3h", "easter": false, "points": ["tbilisi", "gelati", "kutaisi"], "program": ["Przejazd Tbilisi - Kutaisi (3h)", "Gelati Monastery (UNESCO) - mozaiki!", "Ostatnie zakupy na rynku w Kutaisi", "Churchkhela, wino, przyprawy na prezenty"], "food": [["Bikentia", "4.5 (1k)", "Legendarny kebab od 1954!", "https://www.google.com/maps/search/Bikentia+Kutaisi"], ["Nikhrikia", "4.5 (800)", "Kultowe miesne dania od lat 50.", "https://www.google.com/maps/search/Nikhrikia+Kutaisi"], ["Sisters", "4.3 (1.4k)", "Kolacja: muzyka na zywo, atmosfera!", "https://www.google.com/maps/search/Sisters+restaurant+Kutaisi"]], "tips": ["Gelati (4.8): MUST-DO! UNESCO, XII-w. mozaiki, 30-45 min, darmowe, 20 min od Kutaisi", "Rynek = najlepsze miejsce na pamiatki", "Ostatni wieczor - Sisters na kolacje dla atmosfery!"]}, {"num": 8, "date": "Czw 9.04", "title": "Wylot", "drive": "~30 min", "easter": false, "points": ["kutaisi", "kut_air"], "program": ["Wyjazd z Kutaisi ~10:30", "Zwrot auta na lotnisku", "Wylot 12:30 - do domu!"], "food": [["Sniadanie w hotelu", "", "", ""]], "tips": ["Min 2h przed lotem (zwrot auta + odprawa)"]}];
var NOCLEGI = [
  {
    "city": "Kutaisi",
    "dates": "2-4.04 + 8-9.04 (3 noce)",
    "options": [
      {
        "name": "Apartment Soho Tabidze",
        "platform": "Booking.com",
        "rating": 9.7,
        "reviews": 150,
        "location": "0.6 km od centrum",
        "rooms": "2x apartament (2 syp. + 2 \u0142az. + salon + kuchnia, 65-75 m\u00b2)",
        "price": "868 z\u0142 / 2 noce (~$12/os./noc)",
        "cancel": "Bezp\u0142atne",
        "recommended": true,
        "booked": false,
        "link": "https://www.booking.com/searchresults.html?ss=Kutaisi%2C+Georgia&checkin=2026-04-02&checkout=2026-04-04&group_adults=7&group_children=2&age=3&age=5&no_rooms=3&nflt=ht_id%3D201",
        "lat": 42.271,
        "lng": 42.700
      },
      {
        "name": "Apartment BESO",
        "platform": "Booking.com",
        "rating": 8.9,
        "reviews": 376,
        "location": "1 km od centrum",
        "rooms": "2x apartament z balkonem (1 syp. + salon + \u0142az. + kuchnia)",
        "price": "871 z\u0142 / 2 noce (~$12/os./noc)",
        "cancel": "Bezp\u0142atne",
        "recommended": false,
        "booked": false,
        "link": "https://www.booking.com/searchresults.html?ss=Kutaisi%2C+Georgia&checkin=2026-04-02&checkout=2026-04-04&group_adults=7&group_children=2&age=3&age=5&no_rooms=3&nflt=ht_id%3D201",
        "lat": 42.265,
        "lng": 42.698
      }
    ]
  },
  {
    "city": "Tbilisi",
    "dates": "4-6 + 7-8.04 (3 noce, w tym Wielkanoc 5.04)",
    "options": [
      {
        "name": "Cabernet Corner \u2014 Old Tbilisi",
        "platform": "Booking.com",
        "rating": 8.6,
        "reviews": 125,
        "location": "250 m od centrum, Old Tbilisi",
        "rooms": "1 apartament \u00b7 4 sypialnie \u00b7 2 \u0142azienki \u00b7 150 m\u00b2",
        "price": "3 375 z\u0142 / 4 noce (~$23/os./noc)",
        "cancel": "Bezp\u0142atne",
        "recommended": true,
        "booked": false,
        "link": "https://www.booking.com/searchresults.html?ss=Tbilisi%2C+Georgia&checkin=2026-04-04&checkout=2026-04-08&group_adults=7&group_children=2&age=3&age=5&no_rooms=3&nflt=ht_id%3D201",
        "lat": 41.691,
        "lng": 44.810
      },
      {
        "name": "Apartament w starym Tbilisi",
        "platform": "Airbnb",
        "rating": 5.0,
        "reviews": 10,
        "location": "Old Tbilisi",
        "rooms": "4 sypialnie \u00b7 12 \u0142\u00f3\u017cek",
        "price": "1 267 z\u0142 / 4 noce (~$8/os./noc)",
        "cancel": "Bezp\u0142atne",
        "recommended": false,
        "booked": false,
        "link": "https://www.airbnb.com/s/Tbilisi--Georgia/homes?checkin=2026-04-04&checkout=2026-04-08&adults=7&children=2&children_ages=3%2C5&min_bedrooms=3&room_types%5B%5D=Entire%20home%2Fapt",
        "lat": 41.693,
        "lng": 44.808
      },
      {
        "name": "Natali Apartment",
        "platform": "Booking.com",
        "rating": 9.1,
        "reviews": 72,
        "location": "2.8 km od centrum",
        "rooms": "3 sypialnie \u00b7 1 salon \u00b7 150 m\u00b2",
        "price": "1 312 z\u0142 / 4 noce (~$9/os./noc)",
        "cancel": "Bezp\u0142atne",
        "recommended": false,
        "booked": false,
        "link": "https://www.booking.com/searchresults.html?ss=Tbilisi%2C+Georgia&checkin=2026-04-04&checkout=2026-04-08&group_adults=7&group_children=2&age=3&age=5&no_rooms=3&nflt=ht_id%3D201",
        "lat": 41.720,
        "lng": 44.795
      }
    ]
  },
  {
    "city": "Sighnaghi",
    "dates": "6-7.04 (1 noc)",
    "options": [
      {
        "name": "Guest House Vista",
        "platform": "Booking.com",
        "rating": 9.4,
        "reviews": 467,
        "location": "7 min od Muzeum Narodowego",
        "rooms": "Pok\u00f3j dwuosobowy z balkonem \u2014 19 m\u00b2",
        "price": "102 z\u0142 / 1 noc",
        "cancel": "Bezp\u0142atne",
        "recommended": true,
        "booked": true,
        "link": "https://www.booking.com/hotel/ge/guest-house-vista.html",
        "lat": 41.619,
        "lng": 45.925
      },
      {
        "name": "Zandarashvili Guest House",
        "platform": "Booking.com",
        "rating": 8.9,
        "reviews": 582,
        "location": "1.1 km, lok. 9.6",
        "rooms": "4 pokoje (basic + podw\u00f3jny + 2x rodzinny)",
        "price": "283 z\u0142 / 1 noc (~$8/os.)",
        "cancel": "Bezp\u0142atne",
        "recommended": false,
        "booked": false,
        "link": "https://www.booking.com/searchresults.html?ss=Sighnaghi&checkin=2026-04-06&checkout=2026-04-07&group_adults=7&group_children=2&age=3&age=5&no_rooms=3",
        "lat": 41.614,
        "lng": 45.918
      }
    ]
  }
];

var map = L.map("map",{zoomControl:false}).setView([42.0,44.0],8);
L.control.zoom({position:"topright"}).addTo(map);
L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"OpenStreetMap",maxZoom:18}).addTo(map);

function mkI(c,s){return L.divIcon({html:'<div class="cm" style="background:'+c+';width:'+s+'px;height:'+s+'px"></div>',iconSize:[s,s],iconAnchor:[s/2,s/2],className:""});}

var markers={};
ATTR.forEach(function(a){
  var pop='<span class="pop-badge" style="background:'+(a.color==="#1a73e8"?"#e8f0fe":a.color==="#9c27b0"?"#f3e8fd":a.color==="#34a853"?"#e6f4ea":a.color==="#f9ab00"?"#fef7e0":a.color==="#ff7043"?"#fff3e0":"#f1f3f4")+';color:'+(a.color==="#1a73e8"?"#1967d2":a.color==="#fff"?"#5f6368":a.color)+'">' +a.cat+'</span><b>'+a.name+'</b>';
  if(a.rating) pop+='<div class="pop-r">&#11088; '+a.rating+'/5 ('+a.reviews+' reviews)</div>';
  pop+=a.desc;
  pop+='<br><a class="pop-link" href="'+a.gmap+'" target="_blank">&#128205; Otworz w Google Maps</a>';
  var m=L.marker([a.lat,a.lng],{icon:mkI(a.color,a.sz)});
  m.addTo(map);
  m.bindPopup(pop,{maxWidth:260});
  markers[a.id]={m:m,d:a};
});

var accMarkers=[];
NOCLEGI.forEach(function(city){
  city.options.forEach(function(opt){
    if(!opt.recommended && !opt.booked) return;
    var pop='<span class="pop-badge" style="background:#fce4ec;color:#c2185b">Nocleg</span><b>'+opt.name+'</b>';
    pop+='<div class="pop-r">\u2b50 '+opt.rating+'/5 ('+opt.reviews+' opinii)</div>';
    pop+=opt.platform+' \u00b7 '+opt.location+'<br>';
    pop+='<strong>'+opt.price+'</strong><br>';
    pop+='<a class="pop-link" href="'+opt.link+'" target="_blank">\ud83d\udd17 Rezerwuj</a>';
    var m=L.marker([opt.lat,opt.lng],{icon:mkI("#e91e63",14)}).addTo(map);
    m.bindPopup(pop,{maxWidth:260});
    accMarkers.push(m);
    markers['acc_'+opt.name.replace(/\s/g,'_')]={m:m,d:{color:"#e91e63",cat:"Zakwaterowanie"}};
  });
});

var hiddenCats={};
function toggleCat(color,el){
  if(hiddenCats[color]){
    delete hiddenCats[color];
    el.classList.remove("off");
    Object.keys(markers).forEach(function(id){
      var mk=markers[id];
      if(mk.d.color===color) mk.m.addTo(map);
    });
  }else{
    hiddenCats[color]=true;
    el.classList.add("off");
    Object.keys(markers).forEach(function(id){
      var mk=markers[id];
      if(mk.d.color===color) map.removeLayer(mk.m);
    });
  }
}

var routeA=[[42.1767,42.4827],[42.2679,42.6946],[42.3764,42.6008],[42.4581,42.3789],[42.2679,42.6946],[41.7151,44.8271],[41.8417,44.7186],[41.6167,45.9228],[41.7151,44.8271],[42.2961,42.7681],[42.2679,42.6946],[42.1767,42.4827]];
var routeB=[[41.7151,44.8271],[42.1636,44.7025],[42.4569,44.4728],[42.6592,44.6386],[42.4569,44.4728],[42.1636,44.7025],[41.7151,44.8271]];

var lineA=L.polyline(routeA,{color:"#1a73e8",weight:2,opacity:0.4,dashArray:"6,8"}).addTo(map);
var lineB=L.polyline(routeB,{color:"#f9ab00",weight:2,opacity:0.4,dashArray:"6,8"}).addTo(map);

var ad=null;

function getDays(){
  return JSON.parse(JSON.stringify(DAYS_A));
}

function render(){
  var days=getDays(),h="";
  days.forEach(function(d,i){
    var cls="dc"+(d.easter?" easter-bg":"")+(ad===i?" on":"");
    h+='<div class="'+cls+'" onclick="sel('+i+')">';
    h+='<div class="dh"><div class="dn">'+d.num+'</div><div class="dd">'+d.date+'</div></div>';
    h+='<div class="dt">'+d.title+'</div>';
    h+='<div class="dr">&#128663; '+d.drive+'</div>';
    h+='<div class="det'+(ad===i?" show":"")+'">';
    h+='<div class="ds prog"><h4>&#128205; Program</h4><ul>';
    d.program.forEach(function(p){
      if(p==="---") h+='<li class="sep"></li>';
      else h+="<li>"+p+"</li>";
    });
    h+="</ul></div>";
    if(d.split) h+='<div class="ds split-box"><h4>&#128161; OPCJA SPLIT</h4>Kazdy wybiera swoja opcje! Chetni na Kazbegi (caly dzien), inni do Sighnaghi (pol dnia), reszta z dziecmi w Tbilisi. Wieczorem spotykamy sie razem na kolacji!</div>';
    h+='<div class="ds food"><h4>&#127869; Jedzenie</h4>';
    d.food.forEach(function(f){
      h+='<div class="food-item"><span class="food-name">'+f[0]+'</span>';
      if(f[1]) h+=' <span class="food-stars">&#11088; '+f[1]+'</span>';
      if(f[2]) h+=' <span style="color:#5f6368">'+f[2]+'</span>';
      if(f[3]) h+=' <a href="'+f[3]+'" target="_blank">Maps</a>';
      h+="</div>";
    });
    h+="</div>";
    h+='<div class="ds tip"><h4>&#128161; Tips</h4><ul>';
    d.tips.forEach(function(t){h+="<li>"+t+"</li>";});
    h+="</ul></div></div></div>";
  });
  document.getElementById("daysList").innerHTML=h;
}

function sel(i){
  ad=ad===i?null:i;
  render();
  if(ad!==null){
    var days=getDays(),d=days[ad],bounds=[];
    d.points.forEach(function(pid){if(markers[pid])bounds.push(markers[pid].m.getLatLng());});
    if(bounds.length>1)map.fitBounds(bounds,{padding:[50,50],maxZoom:11});
    else if(bounds.length===1)map.setView(bounds[0],11);
    setTimeout(function(){highlightDayMarkers(d.points);},100);
  }else{
    highlightDayMarkers(null);
  }
}

function toggleExtras(){
  var el=document.getElementById("extraList");
  el.classList.toggle("show");
  if(el.classList.contains("show")&&!el.innerHTML){
    var extras=ATTR.filter(function(a){return !a.inPlan;});
    var h="";
    extras.forEach(function(a){
      h+='<div class="ex" onclick="flyTo(\''+a.id+'\')">';
      h+='<div class="en">'+a.name+' <span class="ec">'+a.cat+'</span>';
      if(a.rating) h+=' <span class="er">&#11088; '+a.rating+' ('+a.reviews+')</span>';
      h+=' <a href="'+a.gmap+'" target="_blank" onclick="event.stopPropagation()">Maps</a></div>';
      h+='<div class="ec">'+a.desc.replace(/<br>/g," | ")+'</div>';
      h+="</div>";
    });
    el.innerHTML=h;
  }
}

function flyTo(id){
  if(markers[id]){
    var m=markers[id].m;
    if(!map.hasLayer(m))m.addTo(map);
    map.setView(m.getLatLng(),12);
    m.openPopup();
  }
}

function renderBudget(){
  var el=document.getElementById("budgetPanel");
  el.innerHTML=
    '<h4>&#128663; Transport ‚Äî por√≥wnanie (7 dni)</h4>'+
    '<table>'+
    '<tr><th>Opcja</th><th>Koszt 7 dni</th><th>/osoba</th></tr>'+
    '<tr><td><strong>‚≠ê CheckInKutaisi</strong><br>KIA Carnival 9-os, diesel, CDW gratis, foteliki gratis</td><td>‚Ç¨350 + ~‚Ç¨200 paliwo<br>= <strong>‚Ç¨550</strong></td><td class="best">~‚Ç¨61</td></tr>'+
    '<tr><td>LocalRent (Starex)<br>Automat, foteliki 2√ó$35, dep. $500</td><td>$785 + ~$200 paliwo<br>= ~‚Ç¨900</td><td>~‚Ç¨100</td></tr>'+
    '<tr><td>Martyna z Gruzji üßë‚Äç‚úàÔ∏è<br>Z kierowcƒÖ, zero stresu</td><td>‚Ç¨1260 + ~‚Ç¨250 paliwo<br>= ‚Ç¨1510</td><td>~‚Ç¨168</td></tr>'+
    '<tr><td>Kierowca + przewodnik PL üáµüá±<br>Kierowca + polski przewodnik (+‚Ç¨200/dzie≈Ñ)</td><td>‚Ç¨1260 + ‚Ç¨1400 przewodnik<br>+ ~‚Ç¨250 paliwo = <strong>‚Ç¨2910</strong></td><td>~‚Ç¨323</td></tr>'+
    '</table>'+
    '<div class="note">üí° CheckInKutaisi: dep. ‚Ç¨100 zwrotny, foteliki gratis, CDW w cenie. Kierowca = +‚Ç¨107/os ale zero stresu + zna drogi (Kazbegi!). Przewodnik PL: +‚Ç¨156/os ale komfort i wiedza.</div>'+

    '<h4>&#128176; Szacunek na osobƒô (self-drive)</h4>'+
    '<div class="brow"><span>üöó Transport (CheckInKutaisi)</span><span class="best">~‚Ç¨61</span></div>'+
    '<div class="brow"><span>üè® Noclegi (7 nocy)</span><span>~‚Ç¨50‚Äì70</span></div>'+
    '<div class="brow"><span>üçΩ Jedzenie (7 dni, ~‚Ç¨10‚Äì15/dzie≈Ñ)</span><span>~‚Ç¨70‚Äì100</span></div>'+
    '<div class="brow"><span>üéØ Atrakcje (jaskinia, kanion, ≈Ça≈∫nie, cooking)</span><span>~‚Ç¨20‚Äì30</span></div>'+
    '<div class="brow"><span>üç∑ Wino / degustacje</span><span>~‚Ç¨15‚Äì25</span></div>'+
    '<div class="brow"><span>üéÅ PamiƒÖtki + SIM + ubezpieczenie</span><span>~‚Ç¨25‚Äì40</span></div>'+
    '<div class="brow total"><span>RAZEM (self-drive)</span><span class="best">~‚Ç¨250‚Äì350</span></div>'+
    '<div class="brow total"><span>RAZEM (z kierowcƒÖ)</span><span>~‚Ç¨350‚Äì450</span></div>'+
    '<div class="brow total"><span>RAZEM (kierowca + przewodnik)</span><span>~‚Ç¨500‚Äì600</span></div>'+

    '<h4>&#127919; Atrakcje ‚Äî rozpiska koszt√≥w</h4>'+
    '<div class="brow"><span>Jaskinia Prometeusza</span><span>23 GEL/os (+17 GEL ≈Ç√≥dka)</span></div>'+
    '<div class="brow"><span>Kanion Martvili</span><span>~20 GEL/os (~‚Ç¨7)</span></div>'+
    '<div class="brow"><span>≈Åa≈∫nie siarkowe (sala/h)</span><span>70 GEL (~‚Ç¨25) √∑ grupa</span></div>'+
    '<div class="brow"><span>Cooking class</span><span>‚Ç¨20‚Äì50/os</span></div>'+
    '<div class="brow"><span>Supra wielkanocna</span><span>$30‚Äì50/os</span></div>'+
    '<div class="brow"><span>Sataplia</span><span>20 GEL/os (dzieci <6 free)</span></div>'+
    '<div class="brow"><span>Mtatsminda Park</span><span>funicular 15 GEL + atrakcje $2‚Äì5</span></div>'+
    '<div class="brow"><span>Gelati, Mtskheta, Jvari</span><span>bezp≈Çatne</span></div>'+

    '<h4>&#128722; Ceny w Gruzji</h4>'+
    '<div class="brow"><span>Khinkali (1 szt.)</span><span>1‚Äì2 GEL (‚Ç¨0.50)</span></div>'+
    '<div class="brow"><span>Obiad (restauracja)</span><span>25‚Äì50 GEL (‚Ç¨9‚Äì18)</span></div>'+
    '<div class="brow"><span>Kawa</span><span>2‚Äì6 GEL (‚Ç¨1‚Äì2)</span></div>'+
    '<div class="brow"><span>Piwo (restauracja)</span><span>6‚Äì10 GEL (‚Ç¨2‚Äì4)</span></div>'+
    '<div class="brow"><span>Wino (sklep)</span><span>5‚Äì12 GEL (‚Ç¨2‚Äì4)</span></div>'+
    '<div class="brow"><span>Taxi (Bolt, kr√≥tki)</span><span>6‚Äì10 GEL (‚Ç¨2‚Äì4)</span></div>';
}

function renderPacking(){
  var el=document.getElementById("packingPanel");
  el.innerHTML=
    '<div class="pack-cat">üëï Ubrania</div>'+
    '<div class="pack-item important">Kurtka przeciwdeszczowa (kwiecie≈Ñ = kapry≈õny!)</div>'+
    '<div class="pack-item">Polar / bluza na wieczory (g√≥ry ch≈Çodne)</div>'+
    '<div class="pack-item">Wygodne buty do chodzenia (du≈ºo bruku!)</div>'+
    '<div class="pack-item">Sanda≈Çy / klapki (≈Ça≈∫nie siarkowe)</div>'+
    '<div class="pack-item">Koszulki, spodnie na ~20¬∞C dzie≈Ñ / ~8¬∞C noc</div>'+
    '<div class="pack-item">Czapka z daszkiem / okulary</div>'+

    '<div class="pack-cat">üë∂ Dla ch≈Çopc√≥w (3 i 5 lat)</div>'+
    '<div class="pack-item">PrzekƒÖski na drogƒô (du≈ºo!)</div>'+
    '<div class="pack-item">Lekki w√≥zek spacerowy (opcja)</div>'+
    '<div class="pack-item">Bluzy zapasowe (khinkali = ba≈Çagan)</div>'+

    '<div class="pack-cat">üìÑ Dokumenty</div>'+
    '<div class="pack-item important">Paszport (min. 6 mies. wa≈ºno≈õci!)</div>'+
    '<div class="pack-item important">Revolut / karta wielowalutowa (GEL!)</div>'+
    '<div class="pack-item">Ubezpieczenie podr√≥≈ºne + EKUZ</div>'+
    '<div class="pack-item">Wydruk rezerwacji (hotel, auto, loty)</div>'+
    '<div class="pack-item">Prawo jazdy (kat. B wystarczy)</div>'+

    '<div class="pack-cat">üíä Apteczka</div>'+
    '<div class="pack-item">Ibuprofen / paracetamol</div>'+
    '<div class="pack-item">Leki na biegunkƒô (zmiana kuchni!)</div>'+
    '<div class="pack-item">Plastry, ≈õrodek odka≈ºajƒÖcy</div>'+
    '<div class="pack-item">Krem z filtrem SPF30+</div>'+
    '<div class="pack-item">≈örodek na komary (wieczory nad rzekƒÖ)</div>'+

    '<div class="pack-cat">üöó W aucie</div>'+
    '<div class="pack-item">Foteliki ‚Äî NA MIEJSCU (CheckInKutaisi: gratis!)</div>'+
    '<div class="pack-item">Nawigacja offline (Maps.me lub Google Maps)</div>'+
    '<div class="pack-item">≈Åadowarka USB / powerbank</div>'+
    '<div class="pack-item">Woda, chusteczki mokre</div>'+

    '<div class="pack-cat">üì± Technika</div>'+
    '<div class="pack-item">SIM / eSIM (Magti/Geocell na lotnisku, ~‚Ç¨5)</div>'+
    '<div class="pack-item">Powerbank</div>'+

    '<div class="note" style="margin-top:12px">üîå Adapter gniazdka NIE jest potrzebny ‚Äî Gruzja ma takie same gniazdka jak Polska (typ C/F).</div>';
}

function renderNoclegi(){
  var el=document.getElementById("noclegiPanel");
  var h='';
  NOCLEGI.forEach(function(city){
    h+='<h4>\ud83d\udccd '+city.city+' \u2014 '+city.dates+'</h4>';
    city.options.forEach(function(opt){
      var cls='acc-card'+(opt.recommended?' recommended':'')+(opt.booked?' booked':'');
      h+='<div class="'+cls+'">';
      if(opt.booked) h+='<span class="acc-badge book">\u2705 Zarezerwowano</span>';
      if(opt.recommended) h+='<span class="acc-badge rec">\u2b50 Rekomendacja</span>';
      h+='<div class="acc-name">'+opt.name+'</div>';
      h+='<div class="acc-detail">'+opt.platform+' \u00b7 \u2b50 '+opt.rating+' ('+opt.reviews+') \u00b7 '+opt.location+'</div>';
      h+='<div class="acc-detail">'+opt.rooms+'</div>';
      h+='<div class="acc-price">'+opt.price+'</div>';
      h+='<div class="acc-detail">Anulowanie: '+opt.cancel+'</div>';
      h+='<div class="acc-links"><a href="'+opt.link+'" target="_blank">\ud83d\udd17 Zobacz na '+opt.platform+'</a></div>';
      h+='</div>';
    });
  });
  h+='<h4>\ud83d\udcb0 Podsumowanie nocleg\u00f3w</h4>';
  h+='<div class="note">Wariant ekonomiczny: ~2 852 z\u0142 (~$713) za 8 nocy na 9 os\u00f3b = <strong>~$10/os./noc</strong><br>';
  h+='Wariant comfort: ~$138/os. za ca\u0142y tydzie\u0144</div>';
  el.innerHTML=h;
}

var SURVEY_URL="https://script.google.com/macros/s/AKfycbzWpSpBHkmgHB3h0YyYf41FCnRbN6qI3ovgX2_3MuREr81gZ3CjjQ1igOeSqxYTk-tM/exec";
var SURVEY_FORM="https://forms.gle/23WicBwzDSRhvPkH8";
var surveyColors=["#1a73e8","#ea4335","#34a853","#f9ab00","#9c27b0","#ff7043","#e91e63"];

function renderAnkieta(){
  var el=document.getElementById("ankietaPanel");
  el.innerHTML='<a class="survey-btn" href="'+SURVEY_FORM+'" target="_blank">\ud83d\udcdd Wype\u0142nij ankiet\u0119</a>'+
    '<div class="survey-loading">\u23f3 \u0141adowanie wynik\u00f3w ankiety...</div>';
  fetch(SURVEY_URL)
    .then(function(r){return r.json();})
    .then(function(data){
      var h='<a class="survey-btn" href="'+SURVEY_FORM+'" target="_blank">\ud83d\udcdd Wype\u0142nij ankiet\u0119</a>';
      h+='<div class="survey-respondents">Odpowiedzi: <strong>'+data.total+'</strong> \u2014 '+data.respondents.join(", ")+'</div>';
      data.questions.forEach(function(q,qi){
        h+='<div class="survey-q"><h4>'+q.title+'</h4>';
        var total=0;
        Object.keys(q.results).forEach(function(k){total+=q.results[k];});
        Object.keys(q.results).forEach(function(k,ki){
          var count=q.results[k];
          var pct=total>0?Math.round(count/total*100):0;
          var color=surveyColors[ki%surveyColors.length];
          h+='<div class="survey-bar-wrap">';
          h+='<div class="survey-bar-label">'+k+'</div>';
          h+='<div class="survey-bar-track"><div class="survey-bar-fill" style="width:'+pct+'%;background:'+color+'"><span class="survey-bar-pct">'+(pct>8?pct+'%':'')+'</span></div></div>';
          h+='<div class="survey-bar-count">'+count+'</div>';
          h+='</div>';
        });
        h+='</div>';
      });
      if(data.comments&&data.comments.length){
        h+='<div class="survey-q"><h4>\ud83d\udcac Uwagi i pomys\u0142y</h4>';
        data.comments.forEach(function(c){
          h+='<div class="survey-comment">"'+c+'"</div>';
        });
        h+='</div>';
      }
      el.innerHTML=h;
    })
    .catch(function(err){
      el.innerHTML='<a class="survey-btn" href="'+SURVEY_FORM+'" target="_blank">\ud83d\udcdd Wype\u0142nij ankiet\u0119</a>'+
        '<div class="survey-error">\u274c Nie uda\u0142o si\u0119 za\u0142adowa\u0107 wynik\u00f3w.<br>Sprawd\u017a czy Apps Script jest wdro\u017cony.<br><small>'+err.message+'</small></div>';
    });
}

function mainTab(tab,btn){
  document.querySelectorAll('.main-tabs button').forEach(function(b){b.classList.remove('on');});
  btn.classList.add('on');
  document.querySelectorAll('.tab-pane').forEach(function(p){p.classList.remove('active');});
  document.getElementById('pane-'+tab).classList.add('active');
}

function toggleMapFilters(){
  var ov=document.getElementById("mapFilterOverlay");
  if(ov.classList.contains("show")){ov.classList.remove("show");return;}
  var cats=[
    ["#1a73e8","Miasto"],["#ea4335","Atrakcja"],["#9c27b0","Winnica"],
    ["#34a853","Dzieci"],["#f9ab00","Kazbegi"],["#ff7043","Bonus"],["#e91e63","Noclegi"]
  ];
  var h='<div style="font-size:10px;font-weight:600;color:#5f6368;text-transform:uppercase;letter-spacing:.4px;margin-bottom:4px">Filtry</div>';
  cats.forEach(function(c){
    var off=hiddenCats[c[0]]?" off":"";
    h+='<div class="leg-i'+off+'" onclick="toggleCatMobile(\''+c[0]+'\',this)"><div class="leg-d" style="background:'+c[0]+'"></div>'+c[1]+'</div>';
  });
  ov.innerHTML=h;
  ov.classList.add("show");
}
function toggleCatMobile(color,el){
  toggleCat(color,el);
  var panelItems=document.querySelectorAll('.leg .leg-i');
  panelItems.forEach(function(item){
    var dot=item.querySelector('.leg-d');
    if(dot&&dot.style.background===color){
      if(hiddenCats[color]) item.classList.add('off');
      else item.classList.remove('off');
    }
  });
}

function highlightDayMarkers(dayPoints){
  Object.keys(markers).forEach(function(id){
    var el=markers[id].m.getElement&&markers[id].m.getElement();
    if(!el) return;
    var dot=el.querySelector('.cm');
    if(!dot) return;
    if(!dayPoints){
      dot.classList.remove('cm-dim','cm-highlight');
      return;
    }
    if(dayPoints.indexOf(id)!==-1){
      dot.classList.remove('cm-dim');
      dot.classList.add('cm-highlight');
    }else{
      dot.classList.remove('cm-highlight');
      dot.classList.add('cm-dim');
    }
  });
}

render();
renderBudget();
renderPacking();
renderNoclegi();
renderAnkieta();
</script>

<script>
function mobileView(v){
  var b=document.body;
  if(v==='map'){
    b.classList.add('m-map');b.classList.remove('m-list');
    document.getElementById('btn-map').classList.add('active');
    document.getElementById('btn-list').classList.remove('active');
    setTimeout(function(){if(typeof map!=='undefined')map.invalidateSize();},150);
  }else{
    b.classList.add('m-list');b.classList.remove('m-map');
    document.getElementById('btn-list').classList.add('active');
    document.getElementById('btn-map').classList.remove('active');
    var ov=document.getElementById('mapFilterOverlay');if(ov)ov.classList.remove('show');
  }
}
if(window.innerWidth<=768)document.body.classList.add('m-list');
window.addEventListener('resize',function(){
  if(window.innerWidth>768){document.body.classList.remove('m-map','m-list');if(typeof map!=='undefined')map.invalidateSize();}
});
</script>
</body>
</html>
